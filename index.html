<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de Combat de Creatures</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css?v=1771877621249">
    <link rel="stylesheet" href="compact-popup-style.css?v=1771877621249">
    <!-- Scripts JavaScript du jeu -->
    <script src="constants.js?v=1771877621249" defer></script>
    <script src="formatters.js?v=1771877621249" defer></script>
    <script src="pokemonStats.js?v=1771877621249" defer></script>
    <script src="Creature.js?v=1771877621249" defer></script>
    <script src="gameManager.js?v=1771877621249" defer></script>
    <script src="narrativeData.js?v=1771877621249" defer></script>
    <script src="narrativeManager.js?v=1771877621249" defer></script>
    <script src="uiManager.js?v=1771877621249" defer></script>
    <script src="shopSystem.js?v=1771877621249" defer></script>
    <script src="combatSystem.js?v=1771877621249" defer></script>
    <script src="questSystem.js?v=1771877621249" defer></script>
    <script src="saveSystem.js?v=1771877621249" defer></script>
    <script src="expeditionSystem.js?v=1771877621249" defer></script>
    <script src="towerSystem.js?v=1771877621249" defer></script>
    <script src="zoneSystem.js?v=1771877621249" defer></script>

</head>


<body>
    <div class="game-container">
        <div class="header">
            <div class="header-unified-row">

                <div class="combat-stats-group">
                    <div class="stat-chip header-stat-chip" id="headerStatHP" data-stat="hp">
                        <span class="stat-label">HP :</span>
                        <span class="stat-value">0</span>
                        <span class="stat-chip-boost-icon" title="">‚ö°</span>
                        <span class="stat-sub-info">(<span id="playerHPGain">+0/s</span>)</span>
                    </div>
                    <div class="stat-chip header-stat-chip" id="headerStatAtk" data-stat="attack">
                        <span class="stat-label">ATK :</span>
                        <span class="stat-value">0</span>
                        <span class="stat-chip-boost-icon" title="">‚ö°</span>
                        <span class="stat-sub-info">(<span id="playerAttackGain">+0/s</span>)</span>
                    </div>
                    <div class="stat-chip header-stat-chip" id="headerStatSpAtk" data-stat="spattack">
                        <span class="stat-label">ATK SP :</span>
                        <span class="stat-value">0</span>
                        <span class="stat-chip-boost-icon" title="">‚ö°</span>
                        <span class="stat-sub-info">(<span id="playerSpAttackGain">+0/s</span>)</span>
                    </div>
                    <div class="stat-chip header-stat-chip" id="headerStatDef" data-stat="defense">
                        <span class="stat-label">DEF :</span>
                        <span class="stat-value">0</span>
                        <span class="stat-chip-boost-icon" title="">‚ö°</span>
                        <span class="stat-sub-info">(<span id="playerDefenseGain">+0/s</span>)</span>
                    </div>
                    <div class="stat-chip header-stat-chip" id="headerStatSpDef" data-stat="spdefense">
                        <span class="stat-label">DEF SP :</span>
                        <span class="stat-value">0</span>
                        <span class="stat-chip-boost-icon" title="">‚ö°</span>
                        <span class="stat-sub-info">(<span id="playerSpDefenseGain">+0/s</span>)</span>
                    </div>
                    <div class="stat-chip header-stat-chip" id="headerStatSpd" data-stat="speed">
                        <span class="stat-label">SPD :</span>
                        <span class="stat-value">0</span>
                        <span class="stat-chip-boost-icon" title="">‚ö°</span>
                        <span class="stat-sub-info">(<span id="playerSpeedGain">+0/s</span>)</span>
                    </div>
                </div>

                <div class="header-separator"></div>

                <div class="resources-group">
                    <div class="resource-chip" id="headerStatMoney">
                        <img src="img/pokedollars.png" class="resource-icon resource-icon-img" alt="Pok√©dollars">
                        <div>
                            <div class="resource-val">0</div>
                            <div class="resource-name">Dollars</div>
                        </div>
                    </div>
                    <div class="resource-chip" id="headerStatTokens">
                        <img src="img/quest-token.png" class="resource-icon resource-icon-img" alt="Jetons">
                        <div>
                            <div class="resource-val">0</div>
                            <div class="resource-name">Jetons</div>
                        </div>
                    </div>
                    <div class="resource-chip" id="headerStatMarques">
                        <img src="img/marque-triomphe.png" class="resource-icon resource-icon-img" alt="Marques">
                        <div>
                            <div class="resource-val">0</div>
                            <div class="resource-name">Marques</div>
                        </div>
                    </div>
                </div>

                <div class="header-separator"></div>

                <div class="header-buttons">
                    <button class="btn" onclick="game.openSaveManager()"
                        style="background: #334155; color: white; padding: 0 20px;">
                        ‚ò∞ MENU
                    </button>
                </div>

            </div>
        </div>

        <div class="combat-area">

            <div class="zone-selector">
                <label for="zoneSelect">Zone de combat :</label>
                <select id="zoneSelect" onchange="game.changeZone(this.value)">
                </select>
                <div class="zone-info" id="zoneInfo">...</div>
            </div>

            <div id="towerBuffsContainer" class="tower-buffs-container" style="display: none;">
            </div>



            <div class="battle-screen">
                <div class="battle-display" id="battleDisplay">
                    <div class="creature-display" id="playerSpriteContainer">
                        <div class="sprite-platform player"></div>
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/back/25.png"
                            class="battle-sprite" id="playerSprite">
                    </div>

                    <div class="creature-display" id="enemySpriteContainer">
                        <div class="sprite-platform enemy"></div>
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png"
                            class="battle-sprite" id="enemySprite">
                    </div>

                    <!-- Barre de commandes mont√©e dans le battle-display -->
                    <div class="combat-controls-wrapper">
                        <!-- Menu radial bas-gauche : deux parts de "camembert" Auto / Capture -->
                        <div class="menu-angle-gauche">
                            <button id="autoSelectBtn" class="cmd-btn bouton-part bouton-auto auto-select-btn"
                                onclick="game.openAutoSettings()" onmouseenter="game.showAutoTooltip()"
                                onmouseleave="game.hideAutoTooltip()">
                                <span>AUTO</span>
                                <div class="auto-badge" id="autoBadge"></div>
                            </button>

                            <button id="captureModeBtn" class="cmd-btn bouton-part bouton-capture capture-off"
                                onclick="game.cycleCaptureMode()" onmouseenter="game.showCaptureTooltip()"
                                onmouseleave="game.hideCaptureTooltip()">
                                <span id="captureTextShort">CAPT<br>OFF</span>
                                <div class="capture-badge" id="captureBadge">0</div>
                            </button>
                        </div>

                        <div class="combat-controls-right">
                            <button id="forfeitBtn" class="cmd-btn forfeit" onclick="game.forfeitCombat()"
                                onmouseenter="game.showForfeitTooltip()" onmouseleave="game.hideForfeitTooltip()">
                                <span class="cmd-icon">üè≥Ô∏è</span>
                                <span>Fuir</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="battle-hud" id="battleHud">
                    <div class="hud-player" style="position: relative;">

                        <div class="hud-header-row">
                            <div class="creature-name" id="playerCreatureName">-</div>
                            <button id="ultimateButton" class="ult-rect-btn" onclick="game.activateUltimate()" disabled>
                                <div class="ult-rect-fill" id="ultFill"></div>
                                <div class="ult-rect-content">
                                    <span id="ultText" style="font-weight:800; font-size:9px;">0%</span>
                                </div>
                            </button>
                        </div>
                        <div class="creature-level" id="playerCreatureLevel">Niveau -</div>

                        <div class="health-bar">
                            <div class="health-fill" id="playerHealthFill" style="width: 100%"></div>
                            <div class="health-text" id="playerHealthText">- / -</div>
                        </div>

                        <div class="atb-bar-container" style="position: relative;">

                            <div id="playerATB" class="atb-fill"></div>

                            <div id="playerATBStack" class="atb-stack-badge" style="display:none;">x2</div>

                        </div>

                        <div class="status-icons-container" id="playerStatusIcons"></div>
                        <div class="hud-stats" id="playerHudStats">
                            <div class="hud-stat">
                                <div class="hud-stat-pill">ATK</div>
                                <div class="hud-stat-value" id="playerHudAtk">0</div>
                            </div>
                            <div class="hud-stat">
                                <div class="hud-stat-pill">ATK SP</div>
                                <div class="hud-stat-value" id="playerHudSpAtk">0</div>
                            </div>
                            <div class="hud-stat">
                                <div class="hud-stat-pill">DEF</div>
                                <div class="hud-stat-value" id="playerHudDef">0</div>
                            </div>
                            <div class="hud-stat">
                                <div class="hud-stat-pill">DEF SP</div>
                                <div class="hud-stat-value" id="playerHudSpDef">0</div>
                            </div>
                            <div class="hud-stat">
                                <div class="hud-stat-pill">SPD</div>
                                <div class="hud-stat-value" id="playerHudSpd">0</div>
                            </div>
                        </div>
                    </div>

                    <div class="hud-enemy">
                        <div class="hud-name-row">
                            <div class="creature-name" id="enemyCreatureName">-</div>
                            <div id="effectivenessIndicator" class="effectiveness-indicator"></div>
                        </div>

                        <div class="creature-level" id="enemyCreatureLevel">Niveau -</div>

                        <div class="health-bar">
                            <div class="health-fill" id="enemyHealthFill" style="width: 100%"></div>
                            <div class="health-text" id="enemyHealthText">- / -</div>
                        </div>

                        <div class="atb-bar-container">
                            <div id="enemyATB" class="atb-fill"></div>
                        </div>

                        <div class="status-icons-container" id="enemyStatusIcons"></div>
                        <div class="hud-stats" id="enemyHudStats">
                            <div class="hud-stat">
                                <div class="hud-stat-pill">ATK</div>
                                <div class="hud-stat-value" id="enemyHudAtk">0</div>
                            </div>
                            <div class="hud-stat">
                                <div class="hud-stat-pill">ATK SP</div>
                                <div class="hud-stat-value" id="enemyHudSpAtk">0</div>
                            </div>
                            <div class="hud-stat">
                                <div class="hud-stat-pill">DEF</div>
                                <div class="hud-stat-value" id="enemyHudDef">0</div>
                            </div>
                            <div class="hud-stat">
                                <div class="hud-stat-pill">DEF SP</div>
                                <div class="hud-stat-value" id="enemyHudSpDef">0</div>
                            </div>
                            <div class="hud-stat">
                                <div class="hud-stat-pill">SPD</div>
                                <div class="hud-stat-value" id="enemyHudSpd">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="team-area">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <h2 style="margin: 0;">Equipe Principale (<span id="teamCount">0</span>)
                        <span class="info-icon"
                            style="font-size: 12px; cursor: help; color: #888; background: #2a2a2a; border-radius: 50%; width: 16px; height: 16px; display: inline-flex; justify-content: center; align-items: center; margin-left: 5px; border: 1px solid #444;"
                            onmouseenter="game.showTeamContributionTooltip(event)"
                            onmouseleave="game.hideTooltip()">?</span>
                    </h2>

                    <button id="synergyBtn" class="synergy-btn" type="button" title="Synergies"
                        onclick="game.openSynergyListModal()">
                        <img src="img/synergy-off.png" class="synergy-btn-sprite" alt="Synergies">
                    </button>
                </div>
            </div>

            <div class="team-list" id="teamList"></div>
            <div id="activeTalentsDisplay"></div>

            <h3 style="margin-top: 20px; display: flex; align-items: center; gap: 8px;">
                <span style="cursor: pointer;" onclick="togglePension()">Pension (<span id="pensionCount">0/0</span>)
                    <span id="pensionToggleIcon">‚ñº</span></span>
                <span class="info-icon"
                    style="font-size: 10px; cursor: help; color: #888; background: #2a2a2a; border-radius: 50%; width: 14px; height: 14px; display: inline-flex; justify-content: center; align-items: center; border: 1px solid #444;"
                    onmouseenter="game.showPensionContributionTooltip(event)" onmouseleave="game.hideTooltip()">?</span>
            </h3>

            <div id="pensionContainer">
                <div style="font-size: 12px; color: #ff69b4; margin-bottom: 10px; font-weight: bold;">
                    Les cr√©atures en pension contribuent √† vos stats principales !
                </div>
                <div class="team-list" id="pensionList"></div>
            </div>

            <h3 style="margin-top: 30px;">Stockage (<span id="storageCount">0</span>)</h3>
            <div class="storage-controls">

                <div style="display: flex; gap: 10px;">
                    <input type="text" id="storageSearchInput" placeholder="üîç Rechercher par nom..."
                        oninput="game.updateStorageDisplay()"
                        style="flex: 2; padding: 10px; border-radius: 8px; border: 1px solid #ccc;">

                    <select id="storageTypeFilter" onchange="game.updateStorageDisplay()"
                        style="flex: 1; padding: 10px; border-radius: 8px; border: 1px solid #ccc; font-weight: bold; cursor: pointer; background-color: white;">
                        <option value="all">Tous les types</option>
                        <option value="fire">Feu</option>
                        <option value="water">Eau</option>
                        <option value="grass">Plante</option>
                        <option value="electric">√âlectrik</option>
                        <option value="normal">Normal</option>
                        <option value="flying">Vol</option>
                        <option value="bug">Insecte</option>
                        <option value="poison">Poison</option>
                        <option value="ground">Sol</option>
                        <option value="rock">Roche</option>
                        <option value="fighting">Combat</option>
                        <option value="psychic">Psy</option>
                        <option value="ghost">Spectre</option>
                        <option value="ice">Glace</option>
                        <option value="dragon">Dragon</option>
                        <option value="steel">Acier</option>
                        <option value="dark">T√©n√®bres</option>
                        <option value="fairy">F√©e</option>
                    </select>
                </div>

                <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                    <button onclick="game.sortStorage('pokedex')" class="sort-btn" id="sort-pokedex">Pok√©dex</button>
                    <button onclick="game.sortStorage('level')" class="sort-btn" id="sort-level">Niveau</button>
                    <button onclick="game.sortStorage('rarity')" class="sort-btn" id="sort-rarity">Raret√©</button>
                    <button onclick="game.sortStorage('hp')" class="sort-btn" id="sort-hp">HP</button>
                    <button onclick="game.sortStorage('attack')" class="sort-btn" id="sort-attack">ATK</button>
                    <button onclick="game.sortStorage('spattack')" class="sort-btn" id="sort-spattack">ATK Sp√©.</button>
                    <button onclick="game.sortStorage('defense')" class="sort-btn" id="sort-defense">DEF</button>
                    <button onclick="game.sortStorage('spdefense')" class="sort-btn" id="sort-spdefense">DEF
                        Sp√©.</button>
                    <button onclick="game.sortStorage('speed')" class="sort-btn" id="sort-speed">VIT</button>
                    <button onclick="game.sortStorage('total')" class="sort-btn" id="sort-total">Total</button>
                    <button onclick="game.sortStorage('shards')" class="sort-btn" id="sort-shards">Shards</button>
                </div>

            </div>
            <div class="team-list" id="storageList"></div>
        </div>

        <div class="secondary-content" id="secondaryContent">
            <div class="tabs-container">
                <button class="tab-btn active" onclick="switchTab('boutique')">Boutique</button>

                <button class="tab-btn" onclick="switchTab('sacados')">Sac √† dos</button>

                <button class="tab-btn" onclick="switchTab('pokedex')">Pok√©dex</button>
                <button class="tab-btn" onclick="switchTab('arenas')">Ar√®nes</button>
                <button class="tab-btn" onclick="switchTab('quests')">Qu√™tes<span id="questsTabBadge"></span></button>
                <button class="tab-btn" onclick="switchTab('tower')">Tour de Combat</button>
                <button class="tab-btn" onclick="switchTab('expeditions')">üó∫Ô∏è Exp√©ditions<span
                        id="expeditionsTabBadge"></span></button>
                <button class="tab-btn" onclick="switchTab('teamrocket')">üöÄ Team Rocket<span
                        id="teamRocketTabBadge"></span></button>

            </div>

            <div class="tab-content" id="sacadosTab">

                <div id="autoCatcherPanel" class="porygon-panel" style="display:none;">
                    <div class="porygon-header">
                        <div style="display:flex; align-items:center; gap:10px;">
                            <span style="font-size:20px;">ü§ñ</span>
                            <div>
                                <div style="font-weight:800; letter-spacing:0.5px;">MODULE PORYGON-Z</div>
                                <div style="font-size:10px; color:#c7d2fe;">Syst√®me de capture automatis√© v3.0</div>
                            </div>
                        </div>
                        <div class="porygon-status">ACTIF</div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                        <div class="switch-container">
                            <span style="font-size:11px; font-weight:600;">‚ú® Shinies</span>
                            <label class="switch">
                                <input type="checkbox" id="ac-shiny" onchange="game.toggleAutoCatch('shiny')">
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="switch-container">
                            <span style="font-size:11px; font-weight:600;">üìñ Nouveaux</span>
                            <label class="switch">
                                <input type="checkbox" id="ac-new" onchange="game.toggleAutoCatch('new')">
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="switch-container">
                            <span style="font-size:11px; font-weight:600;">‚ôªÔ∏è Farm (Tout)</span>
                            <label class="switch">
                                <input type="checkbox" id="ac-dupe" onchange="game.toggleAutoCatch('dupe')">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                <h3>üê£ Incubateurs</h3>
                <p style="font-size:12px; color:#64748b; margin:0 0 10px 0;">Placez un ≈ìuf dans un incubateur pour
                    l'incuber. Une fois le temps √©coul√©, cliquez pour ouvrir.</p>
                <div class="incubators-container" id="incubatorsContainer"></div>

                <h3>Inventaire d'oeufs (<span id="ballCount">0</span>)</h3>
                <div class="balls-container" id="ballsContainer"></div>

                <hr
                    style="margin: 20px 0; border: none; height: 2px; background: linear-gradient(to right, transparent, #5d4a3e 20%, #5d4a3e 80%, transparent); opacity: 0.6;">

                <div id="activeStatBoosts"></div>
                <div id="itemsContainer"></div>
            </div>

            <div class="tab-content active" id="boutiqueTab">

                <div class="sub-tabs-container">
                    <button class="sub-tab-btn" onclick="switchShopSubTab('epicerie')">üè™ √âpicerie</button>

                    <button class="sub-tab-btn active" onclick="switchShopSubTab('pokedollars')"><img
                            src="img/pokedollars.png" class="pokedollars-inline" alt="" style="width:18px;height:18px;">
                        Am√©liorations</button>
                    <button class="sub-tab-btn" onclick="switchShopSubTab('jetons')"><img src="img/quest-token.png"
                            class="quest-token-inline" alt="" style="width:18px;height:18px;"> Boutique Jetons</button>
                    <button class="sub-tab-btn" onclick="switchShopSubTab('marques')"><img src="img/marque-triomphe.png"
                            class="marque-triomphe-inline" alt="" style="width:18px;height:18px;"> Boutique
                        Tour</button>
                    <button class="sub-tab-btn" onclick="switchShopSubTab('recycleur')">‚ôªÔ∏è Recycleur</button>
                </div>

                <div class="sub-tab-content" id="shop-epicerie">
                    <h3>Pok√©Mart</h3>
                    <div class="shop-wallet">
                        Porte-monnaie : üí∞ <span id="martMoney">0</span>
                    </div>
                    <div class="shop-container" id="martContainer">
                    </div>
                </div>

                <div class="sub-tab-content active" id="shop-pokedollars">
                    <h3>Am√©liorations</h3>
                    <div class="upgrades-container" id="upgradesContainer">
                    </div>
                </div>

                <div class="sub-tab-content" id="shop-jetons">
                    <h3>Boutique Sp√©ciale</h3>
                    <div class="shop-container" id="shopContainer">
                    </div>
                </div>

                <div class="sub-tab-content" id="shop-marques">
                    <h4 style="margin-top: 0;">Boutique de la Tour</h4>
                    <p class="shop-intro">Utilisez vos Marques du Triomphe pour acheter des am√©liorations uniques !</p>
                    <div class="shop-container" id="towerShopContainer">
                    </div>
                </div>
                <div class="sub-tab-content" id="shop-recycleur">
                    <div class="recycler-header">
                        Total : <img src="img/essence-dust.png" class="essence-dust-inline" alt=""> <span
                            class="essence-count" id="essenceDustCount">0</span> Poussi√®re d'Essence
                    </div>

                    <div class="recycler-container">
                        <div class="recycler-list" id="recyclerShardList">
                            <div class="recycler-header">Vos Shards</div>
                        </div>
                        <div class="recycler-shop" id="recyclerDustShop">
                            <div class="recycler-header">Boutique de Poussi√®re</div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="tab-content" id="pokedexTab">
                <div style="display:flex; gap:8px; margin-bottom:15px; flex-wrap:wrap;">
                    <button class="sort-btn active" id="pokedexSubTab-pokedex"
                        onclick="game.switchPokedexSubTab('pokedex')">Pok√©dex</button>
                    <button class="sort-btn" id="pokedexSubTab-collectionbonuses"
                        onclick="game.switchPokedexSubTab('collectionbonuses')">‚≠ê Bonus collection</button>
                </div>

                <div id="pokedexSubView-pokedex">
                    <h3>Pok√©dex (<span id="pokedexCount">0</span>/<span id="pokedexTotal">0</span> d√©couverts)</h3>
                    <div class="pokedex-controls">
                        <button onclick="game.sortPokedex('id')" class="sort-btn" id="sort-pokedex-id">Num√©ro</button>
                        <button onclick="game.sortPokedex('name')" class="sort-btn" id="sort-pokedex-name">Nom</button>
                        <button onclick="game.sortPokedex('rarity')" class="sort-btn"
                            id="sort-pokedex-rarity">Raret√©</button>
                        <button onclick="game.sortPokedex('count')" class="sort-btn active"
                            id="sort-pokedex-count">Obtenus</button>
                        <button onclick="game.sortPokedex('type')" class="sort-btn" id="sort-pokedex-type">Type</button>
                    </div>
                    <div class="team-list" id="pokedexList"></div>
                </div>

                <div id="pokedexSubView-collectionbonuses" style="display:none;">
                    <h3>Bonus de collection</h3>
                    <p style="font-size: 12px; color: #666; margin-bottom: 10px;">Bonus "Maillon Faible" : √©volution
                        finale requise, niveau = min(prestige). Manquant ou prestige 0 = bonus 0.</p>
                    <div id="collectionBonusesTabs" style="display:flex; flex-wrap:wrap; gap:6px; margin-bottom:15px;">
                    </div>
                    <div id="collectionBonusesContainer"></div>
                </div>
            </div>

            <div class="tab-content" id="questsTab">
                <div class="quest-stats">
                    <div class="quest-stat">
                        <div class="quest-stat-value" id="questTokens">0</div>
                        <div class="quest-stat-label"><img src="img/quest-token.png" class="quest-token-inline" alt=""
                                style="width:16px;height:16px;"> Jetons</div>
                    </div>
                    <div class="quest-stat">
                        <div class="quest-stat-value" id="questCompleted">0</div>
                        <div class="quest-stat-label">Termin√©es</div>
                    </div>
                </div>

                <div class="active-boosts" id="activeBoosts" style="display: none;">
                    <h4 style="margin-bottom: 10px; color: #d97706;">Boosts Actifs</h4>
                    <div id="boostsList"></div>
                </div>

                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; margin-top: 20px;">
                    <h3>Qu√™tes du Jour (<span id="questCount">0</span>/10)</h3>
                    <div class="quest-timer" id="questTimer"
                        style="font-size: 12px; background: #e2e8f0; padding: 5px 10px; border-radius: 15px;">
                        Prochaine : <strong id="nextQuestTime">--:--</strong>
                    </div>
                </div>

                <div class="quest-container" id="questContainer">
                </div>

                <h3 style="margin-top: 40px; border-top: 2px solid #e2e8f0; padding-top: 20px;">
                    Succ√®s Permanents (<span id="achievementsCount">0</span>/<span id="achievementsTotal">0</span>)
                </h3>
                <div class="quest-container" id="achievementsContainer">
                </div>
            </div>

            <div class="tab-content" id="towerTab">
                <h3>Tour de Combat</h3>
                <div style="text-align: center; margin-bottom: 20px;">
                    <p>Affrontez des dresseurs de plus en plus forts sans vous soigner pour gagner des r√©compenses
                        exclusives !</p>
                    <div class="tower-stats">
                        <div>Record Personnel : √âtage <strong id="towerRecord">0</strong></div>
                        <div>üéüÔ∏è Tickets de Combat : <strong id="combatTickets">0</strong></div>
                        <div><img src="img/marque-triomphe.png" class="marque-triomphe-inline" alt=""
                                style="width:18px;height:18px;"> Marques du Triomphe : <strong
                                id="marquesDuTriomphe">0</strong></div>
                    </div>
                    <button id="towerStartBtn" class="btn btn-save" onclick="game.startTowerRun()" disabled>Lancer
                        l'ascension (co√ªte 1 ticket)</button>
                </div>
            </div>


            <div class="tab-content" id="expeditionsTab">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h3 style="margin:0;">Carte des Exp√©ditions</h3>
                    <div style="display:flex; gap:10px; align-items:center;">
                        <button class="zone-details-btn" style="background: #8b5cf6; font-size:12px; padding:5px 10px;"
                            onclick="game.showMasteryModal()">
                            üìú Ma√Ætrises
                        </button>

                        <span class="expedition-slots" style="font-size: 12px; padding: 5px 10px; border-radius: 15px;">
                            Slots : <strong id="expeditionSlots">1/1</strong>
                        </span>
                    </div>
                </div>

                <h4 style="color: #666; margin-bottom: 10px;">Missions Disponibles</h4>
                <div class="quest-container" id="availableExpeditionsList">
                </div>

                <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">

                <h4 style="color: #666; margin-bottom: 10px;">En cours</h4>
                <div class="quest-container" id="activeExpeditionsContainer">
                    <p style="color: #666;">Aucune exp√©dition en cours...</p>
                </div>
            </div>


            <div class="tab-content" id="arenasTab">
                <h3>Ar√®nes de Combat</h3>
                <div class="account-talents-box">
                    <h4>Talents de Compte D√©bloqu√©s</h4>
                    <div id="badgesList">
                    </div>
                </div>
                <div class="upgrades-container" id="arenasContainer"></div>
            </div>

            <div class="tab-content" id="teamrocketTab">
                <h3>üöÄ Onglet Team Rocket</h3>
                <p style="font-size:12px; color:#64748b; margin:0 0 10px 0;">
                    Banque √† int√©r√™ts, Pr√™t, Staking Push Your Luck et Casino Rocket autour des Jetons Rocket (RJ).
                </p>
                <div id="teamRocketPanel"></div>
            </div>



        </div> <!-- ‚úÖ FERMETURE DE secondaryContent -->

        <!-- ‚úÖ BOUTON EXTRAS (EN DEHORS DE secondaryContent) -->
        <button
            style="position: fixed; bottom: 20px; right: 20px; padding: 15px 25px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; border-radius: 50px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 100;"
            onclick="toggleSecondaryContent()">
            <span id="toggleIcon">‚ñ≤<span id="extrasBadge"></span></span> Extras
        </button>

        <!-- Navigation mobile (visible uniquement sur smartphone) -->
        <nav class="mobile-nav" id="mobileNav">
            <button class="mobile-nav-btn active" data-panel="combat" onclick="switchMobilePanel('combat')">
                <span class="mobile-nav-icon">‚öîÔ∏è</span>
                <span class="mobile-nav-label">Combat</span>
            </button>
            <button class="mobile-nav-btn" data-panel="team" onclick="switchMobilePanel('team')">
                <span class="mobile-nav-icon">üë•</span>
                <span class="mobile-nav-label">√âquipe</span>
            </button>
            <button class="mobile-nav-btn" data-panel="extras" onclick="switchMobilePanel('extras')">
                <span class="mobile-nav-icon">üì¶</span>
                <span class="mobile-nav-label">Extras</span>
            </button>
        </nav>

    </div> <!-- ‚úÖ FERMETURE DE game-container -->

    <!-- Modals : m√™me contenu que modals.html, embarqu√© pour file:// -->
    <!-- Modal de concept du jeu (avant le choix du starter) -->
    <div class="stats-modal game-concept-modal" id="gameConceptModal"
        style="background: rgba(0,0,0,0.92); z-index: 19999;">
        <div class="stats-content" style="max-width: 520px; text-align: center;" onclick="event.stopPropagation()">
            <h1 style="color: #f59e0b; margin-bottom: 16px; font-size: 26px;"> Bienvenue jeune dresseur </h1>
            <p style="color: #e2e8f0; line-height: 1.6; margin-bottom: 16px; font-size: 15px;">Vous allez
                <strong>combattre</strong> des Pok√©mon sauvages en zone, les <strong>capturer</strong> avec des Pok√©
                Balls, et faire <strong>√©voluer</strong> votre √©quipe. Les qu√™tes sc√©nario vous guideront pas √† pas.
            </p>
            <p style="color: #94a3b8; line-height: 1.5; margin-bottom: 24px; font-size: 14px;">En haut : <strong>Zone de
                    combat</strong> (choisir la zone). Au centre : <strong>combat</strong> puis proposition de
                <strong>capture</strong> apr√®s une victoire. Onglets : <strong>√âquipe</strong>, <strong>Qu√™tes</strong>,
                <strong>Extras</strong> (boutiques, ≈ìufs, etc.).
            </p>
            <button class="btn" onclick="game.closeConceptModal()"
                style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 14px 28px; font-size: 16px; font-weight: bold; border-radius: 10px;">Choisir
                mon starter</button>
        </div>
    </div>
    <!-- Guide de qu√™te (positionn√© pour ne pas masquer le module de capture) -->
    <div class="quest-guide-modal" id="questGuideModal">
        <div class="quest-guide-content" onclick="event.stopPropagation()">
            <div class="quest-guide-header">
                <h3 id="questGuideTitle">üìã Guide</h3>
                <button type="button" class="quest-guide-close" onclick="game.closeQuestGuide()"
                    title="Fermer">√ó</button>
            </div>
            <div id="questGuideBody" class="quest-guide-body"></div>
            <button type="button" class="btn quest-guide-btn" onclick="game.closeQuestGuide()">J'ai compris</button>
        </div>
    </div>
    <div class="quest-completion-modal" id="towerCompletionModal"
        onclick="document.getElementById('towerCompletionModal').classList.remove('show')">
        <div class="quest-completion-content" onclick="event.stopPropagation()">
            <button id="closeTowerBtn" class="stats-close" type="button" title="Fermer">&times;</button>
            <div class="quest-completion-title"> FIN DE L'ASCENSION </div>
            <div id="towerCompletionInfo"></div>
            <div class="quest-completion-rewards" id="towerCompletionRewards"></div>
        </div>
    </div>
    <div id="statsModal" class="stats-modal">
        <div class="stats-content">
            <div class="stats-header">
                <h2>üìä Statistiques</h2>
                <button class="stats-close" onclick="game.closeStatsModal()">&#10005;</button>
            </div>
            <div id="statsDisplay"></div>
        </div>
    </div>
    <div id="bonusModal" class="stats-modal">
        <div class="stats-content" onclick="event.stopPropagation()">
            <div class="stats-header" style="border-bottom-color: #8b5cf6;">
                <h2 style="color: #8b5cf6;"> Bonus & Boutique</h2>
                <button class="stats-close" onclick="game.closeBonusModal()">&#10005;</button>
            </div>
            <div id="bonusDisplay"></div>
        </div>
    </div>
    <div id="toastContainer" class="toastContainer"></div>
    <div class="quest-completion-modal" id="eggHatchModal" onclick="game.closeEggHatchModal()">
        <div class="quest-completion-content" id="eggHatchContent" onclick="event.stopPropagation()"></div>
    </div>
    <div class="quest-completion-modal" id="chooseEggModal" onclick="game.closeChooseEggModal()">
        <div class="quest-completion-content" id="chooseEggContent" onclick="event.stopPropagation()">
            <div class="choose-egg-modal-title">
                <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/lucky-egg.png" alt=""
                    class="egg-icon">
                <span>Choisir un ≈ìuf</span>
            </div>
            <p class="choose-egg-modal-subtitle">S√©lectionnez la raret√© de l'≈ìuf √† placer dans cet incubateur.</p>
            <div id="chooseEggOptions" class="choose-egg-options"></div>
            <button type="button" class="choose-egg-cancel" onclick="game.closeChooseEggModal()">Annuler</button>
        </div>
    </div>
    <div class="stats-modal" id="creatureModal" onclick="game.closeCreatureModal()">
        <div class="stats-content" id="creatureModalContent" onclick="event.stopPropagation()"></div>
    </div>
    <div class="stats-modal" id="zoneTierModal" onclick="closeZoneTierModal()">
        <div class="stats-content" id="zoneTierModalContent" onclick="event.stopPropagation()">
            <div class="stats-header">
                <h2 id="zoneTierModalTitle">Progression de la Zone</h2>
                <button class="stats-close" onclick="closeZoneTierModal()">&#10005;</button>
            </div>
            <div class="team-list" id="zoneTierModalGrid"></div>
        </div>
    </div>
    <div class="stats-modal" id="synergyListModal" onclick="closeSynergyListModal()">
        <div class="stats-content" onclick="event.stopPropagation()" style="max-width: 700px;">
            <div class="stats-header">
                <h2>Guide des Synergies</h2>
                <button class="stats-close" onclick="closeSynergyListModal()">&#10005;</button>
            </div>
            <div id="synergyListContent" class="synergy-list-grid"></div>
        </div>
    </div>
    <div id="pensionContributionPopover" class="pension-contribution-popover">
        <div id="pensionContributionContent"></div>
    </div>
    <div class="stats-modal" id="relicModal">
        <div class="stats-content" style="text-align: center;">
            <div class="stats-header">
                <h2> R√©compense d'√âtage</h2>
            </div>
            <p style="margin-bottom: 20px;">Choisissez une relique pour la suite de l'ascension :</p>
            <div id="relicOptionsGrid"
                style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 15px;"></div>
        </div>
    </div>
    <div class="quest-completion-modal" id="captureModal">
        <div class="quest-completion-content" style="max-width: 500px;">
            <div class="quest-completion-title" style="color: #ff6b6b;">Ennemi Vaincu !</div>
            <div style="margin: 20px 0;">
                <img id="captureSprite" src="" style="width: 96px; height: 96px;">
                <h3 id="captureName" style="margin-top: 10px;"></h3>
                <p id="captureChanceText" style="color: #666; font-size: 14px;"></p>
            </div>
            <div id="captureButtons"
                style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px;"></div>
            <button class="btn" style="background: #ef4444; color: white; width: 100%;" onclick="game.skipCapture()">Ne
                pas capturer (Partir)</button>
        </div>
    </div>
    <!-- Modal de s√©lection des cibles de capture -->
    <!-- Popup compact de s√©lection des cibles de capture -->
    <div class="compact-popup" id="captureTargetWrapper">
        <div class="stats-header">
            <h2>Cibles de Capture</h2>
            <button class="stats-close"
                onclick="document.getElementById('captureTargetWrapper').classList.remove('show'); document.getElementById('captureTargetWrapper').style.display='none';">&#10005;</button>
        </div>
        <div class="popup-content">
            <p style="text-align: center; margin-bottom: 8px;">
                Cliquez sur les Pok√©mon √† capturer automatiquement.
            </p>
            <span id="captureTargetLimit"
                style="display: block; text-align: center; font-weight: bold; color: #d97706; font-size: 14px; margin-bottom: 12px;"></span>
            <div id="captureTargetGrid" class="capture-target-grid"></div>
        </div>
    </div>

    <!-- Tooltip enrichi pour le bouton Auto -->
    <div class="auto-tooltip" id="autoTooltip">
        <div
            style="margin-bottom:6px; font-weight:bold; color:#fbbf24; border-bottom:1px solid rgba(255,255,255,0.2); padding-bottom:4px;">
            Statut Auto
        </div>
        <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
            <span>Mode Auto :</span>
            <span id="tooltipStatus" class="tooltip-status">OFF</span>
        </div>
        <div class="tooltip-detail">
            <span>D√©savantage Switch :</span>
            <span id="tooltipDisadvantage" class="tooltip-status off">OFF</span>
        </div>
        <div class="tooltip-detail">
            <span>Endurance Switch :</span>
            <span id="tooltipStamina" class="tooltip-status off">OFF</span>
        </div>
        <div class="tooltip-detail">
            <span>Ultime Auto :</span>
            <span id="tooltipUltimate" class="tooltip-status off">OFF</span>
        </div>
    </div>

    <!-- Tooltip enrichi pour le bouton Capture -->
    <div class="capture-tooltip" id="captureTooltip">
        <div
            style="margin-bottom:6px; font-weight:bold; color:#fbbf24; border-bottom:1px solid rgba(255,255,255,0.2); padding-bottom:4px;">
            Capture Cibl√©e
        </div>
        <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
            <span>√âtat :</span>
            <span id="tooltipCaptureStatus" class="tooltip-status">OFF</span>
        </div>
        <div style="font-size:11px; color:#aaa; font-style:italic;">
            Cliquez pour d√©finir les cibles.
        </div>
    </div>

    <!-- Tooltip enrichi pour le bouton Fuite -->
    <div class="forfeit-tooltip" id="forfeitTooltip">
        <div
            style="margin-bottom:6px; font-weight:bold; color:#ef4444; border-bottom:1px solid rgba(255,255,255,0.2); padding-bottom:4px;">
            Abandon / Fuite
        </div>
        <div style="font-size:12px; color:#e5e7eb;">
            Quitter le combat en cours.
        </div>
        <div style="font-size:11px; color:#aaa; font-style:italic; margin-top:4px;">
            Compte comme une d√©faite.
        </div>
    </div>




    <!-- Popup compact de configuration Auto -->
    <div class="compact-popup" id="autoSettingsModal">
        <div class="stats-header">
            <h2>Mode Auto</h2>
            <button class="stats-close" onclick="game.closeAutoSettings()">&#10005;</button>
        </div>
        <!-- Toggle principal ON/OFF -->

        <div class="popup-content">
            <!-- Toggle principal ON/OFF (Style harmonis√©) -->
            <div class="auto-master-item">
                <span id="autoMasterLabel">Activer le Mode Auto</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="autoMasterToggle" onchange="game.toggleAutoMaster()">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div style="width: 100%; height: 1px; background: rgba(255,255,255,0.1); margin: 10px 0;"></div>

            <p style="text-align: center; margin-bottom: 12px; font-size: 12px; color: #aaa;">Fonctionnalit√©s actives :
            </p>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <label class="auto-setting-item">
                    <input type="checkbox" id="autoSwitchDisadvantageCheck"
                        onchange="game.toggleAutoSetting('disadvantage')" checked>
                    <span class="auto-setting-label">
                        <strong>üîÑ Switch D√©savantage</strong>
                        <small>Remplace un Pok√©mon en d√©savantage de type</small>
                    </span>
                </label>
                <label class="auto-setting-item">
                    <input type="checkbox" id="autoSwitchStaminaCheck" onchange="game.toggleAutoSetting('stamina')"
                        checked>
                    <span class="auto-setting-label">
                        <strong>‚ö° Switch Endurance</strong>
                        <small>Remplace un Pok√©mon √† 0 endurance</small>
                    </span>
                </label>
                <label class="auto-setting-item">
                    <input type="checkbox" id="autoUltimateCheck" onchange="game.toggleAutoSetting('ultimate')" checked>
                    <span class="auto-setting-label">
                        <strong>üåü Ultime Auto</strong>
                        <small>Lance l'ultime quand la jauge est pleine</small>
                    </span>
                </label>
            </div>
        </div>
    </div>
    <div class="stats-modal" id="starterModal" style="background: rgba(0,0,0,0.95); z-index: 20000;">
        <div class="stats-content"
            style="max-width: 900px; text-align: center; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
            <h1 style="color: #333; margin-bottom: 10px; font-size: 32px;">Bienvenue, Dresseur !</h1>
            <p style="color: #666; margin-bottom: 30px; font-size: 18px;">Le monde des cr√©atures vous attend. Choisissez
                votre premier compagnon pour d√©buter l'aventure.</p>
            <div class="starter-container"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                <div class="starter-card" onclick="game.selectStarter('grass')">
                    <div class="starter-bg grass"></div>
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png"
                        class="starter-sprite">
                    <h2 style="color: #2e7d32;">Bulbasaur</h2>
                    <div class="type-badge type-grass">Plante</div>
                    <div class="type-badge type-poison">Poison</div>
                    <p>Un Pok√©mon √©quilibr√©, id√©al pour les d√©butants.</p>
                </div>
                <div class="starter-card" onclick="game.selectStarter('fire')">
                    <div class="starter-bg fire"></div>
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png"
                        class="starter-sprite">
                    <h2 style="color: #c62828;">Charmander</h2>
                    <div class="type-badge type-fire">Feu</div>
                    <p>Une puissance offensive redoutable une fois √©volu√©.</p>
                </div>
                <div class="starter-card" onclick="game.selectStarter('water')">
                    <div class="starter-bg water"></div>
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/7.png"
                        class="starter-sprite">
                    <h2 style="color: #1565c0;">Squirtle</h2>
                    <div class="type-badge type-water">Eau</div>
                    <p>Une d√©fense solide pour r√©sister aux assauts.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="stats-modal" id="saveManagerModal" onclick="game.closeSaveManager()">
        <div class="stats-content" onclick="event.stopPropagation()" style="max-width: 500px; text-align: center;">
            <div class="stats-header">
                <h2>‚ò∞ Menu Principal</h2>
                <button class="stats-close" onclick="game.closeSaveManager()">&#10005;</button>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 25px;">
                <button class="menu-btn" onclick="game.openStatsModal(); game.closeSaveManager();">
                    <span style="font-size: 20px;">üìä</span> Stats
                </button>
                <button class="menu-btn" onclick="game.openBonusModal(); game.closeSaveManager();">
                    <span style="font-size: 20px;">üéÅ</span> Bonus
                </button>
                <button class="menu-btn" onclick="game.openLogModal(); game.closeSaveManager();">
                    <span style="font-size: 20px;">üìú</span> Journal
                </button>
            </div>
            <hr style="border: 0; border-top: 1px solid #3b3b3b; margin: 20px 0;">
            <h3
                style="margin: 0 0 10px 0; font-size: 13px; color: #cbd5e1; text-transform: uppercase; text-align: left;">
                üíæ Donn√©es
            </h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px;">
                <button class="btn btn-save" onclick="game.handleSaveClick(this)"
                    style="grid-column: 1 / -1; padding: 12px; background: #5d4a3e; border: 2px solid #3b3b3b; box-shadow: 0 3px 0 #3b3b3b;">Sauvegarder</button>
                <button class="btn" onclick="game.exportSaveFile()"
                    style="background: #475569; color: white; border: 2px solid #1e293b; padding: 10px; font-size: 11px;">‚¨áÔ∏è
                    Exporter</button>
                <button class="btn" onclick="game.importSaveFile()"
                    style="background: #d97706; color: white; border: 2px solid #78350f; padding: 10px; font-size: 11px;">‚¨ÜÔ∏è
                    Importer</button>
            </div>
            <div class="menu-section-dark">
                <h3 style="margin: 0 0 10px 0; font-size: 13px; color: #cbd5e1; text-transform: uppercase;">‚öôÔ∏è Options
                </h3>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <span style="font-size: 13px; font-weight:bold;">üß¨ Smart Fusion</span>
                    <button id="optSmartFusion" onclick="game.toggleSmartFusion()" class="btn"
                        style="padding: 4px 10px; font-size: 11px; border-radius: 20px; min-width: 50px; background: #5d4a3e; border: 2px solid #1a1a1a;">?</button>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <span style="font-size: 13px; font-weight:bold;">üõë Pause Rare</span>
                    <button id="optPauseRare" onclick="game.toggleRarePause()" class="btn"
                        style="padding: 4px 10px; font-size: 11px; border-radius: 20px; min-width: 50px; background: #5d4a3e; border: 2px solid #1a1a1a;">?</button>
                </div>
                <div style="margin-top: 10px;">
                    <div style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
                        <span style="font-size: 13px; font-weight:bold;">üí§ Vitesse simu hors-ligne</span>
                        <span id="optOfflineSimValue" style="font-size: 11px; color:#e2e8f0;">300 combats/s</span>
                    </div>
                    <input id="optOfflineSimSlider" type="range" min="1" max="1000" step="1" value="300"
                        oninput="if(game){ game.updateOfflineSimSliderLabel(this.value); }"
                        onchange="if(game){ game.updateOfflineSimFromSlider(this.value); }" style="width:100%;">
                </div>
            </div>
            <div class="menu-danger-zone">
                <button class="btn btn-reset" onclick="resetGame()"
                    style="width: 100%; font-size: 11px; padding: 8px; background: #dc2626; color: white; border: 2px solid #991b1b;">üóëÔ∏è
                    R√©initialiser le jeu</button>
            </div>
            <div style="margin-top: 15px; font-size: 10px; color: #cbd5e1;">v1.0.3</div>
        </div>
    </div>
    <div class="stats-modal" id="masteryModal"
        onclick="document.getElementById('masteryModal').classList.remove('show')">
        <div class="stats-content" style="max-width: 600px;" onclick="event.stopPropagation()">
            <div class="stats-header">
                <h2>üìú Ma√Ætrise des Biomes</h2>
                <button class="stats-close"
                    onclick="document.getElementById('masteryModal').classList.remove('show')">&#10005;</button>
            </div>
            <p style="color:#666; font-size:13px; margin-bottom:20px;">Effectuez des exp√©ditions pour monter de niveau
                dans chaque biome et r√©duire la dur√©e des trajets !</p>
            <div id="masteryListGrid" class="team-list" style="grid-template-columns: 1fr;"></div>
        </div>
    </div>
    <div id="customTooltip" class="custom-tooltip"></div>
    <div id="logModal" class="modal">
        <div class="modal-content log-modal-content">
            <div class="modal-header-logs">
                <h2>üìú Journal d'Aventure</h2>
                <button class="close-btn" onclick="game.closeLogModal()"
                    style="background:none; border:none; color:#e2e8f0; font-size:28px; cursor:pointer; line-height:1;">&times;</button>
            </div>
            <div id="gameLog" class="log-console-scroll">
                <div class="log-entry" style="color:#94a3b8; font-style:italic; text-align:center; padding-top:20px;">Le
                    journal enregistre les √©v√©nements importants...</div>
            </div>
            <div class="modal-footer-logs">
                <button class="btn" onclick="game.clearLogs()"
                    style="background: #ef4444; color: white; border:none; padding: 8px 16px; border-radius:6px; cursor:pointer; font-size:12px; font-weight:600;">üóëÔ∏è
                    Effacer l'historique</button>
            </div>
        </div>
    </div>
    <div id="offlineModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üí§ Rapport de Veille</h2>
                <span class="close-modal" onclick="closeOfflineModal()">&times;</span>
            </div>
            <div class="modal-body">
                <p class="offline-time-text">Vous avez √©t√© absent pendant <span id="offlineTimeDisplay"
                        class="highlight">00h 00m</span></p>
                <div class="offline-stats-grid">
                    <div class="stat-box"><span class="stat-icon">‚öîÔ∏è</span><span id="offlineCombats"
                            class="stat-value">0</span><span class="stat-label">Combats</span></div>
                    <div class="stat-box"><span class="stat-icon">üèÜ</span><span id="offlineWins"
                            class="stat-value">0</span><span class="stat-label">Victoires</span></div>
                    <div class="stat-box"><span class="stat-icon">üì¶</span><span id="offlineDrops"
                            class="stat-value">0</span><span class="stat-label">Objets</span></div>
                    <div class="stat-box"><span class="stat-icon">üï∏Ô∏è</span><span id="offlineCaptured"
                            class="stat-value">0</span><span class="stat-label">Captur√©s</span></div>
                </div>
                <div class="offline-loot-section">
                    <div class="loot-header">D√©tails du Butin</div>
                    <div id="offlineLootList" class="loot-list"></div>
                </div>
                <div class="offline-rewards">
                    <div class="reward-row"><span class="reward-label">‚ú® Exp√©rience :</span><span id="offlineXp"
                            class="reward-value xp-color">+0 XP</span></div>
                    <div class="reward-row"><span class="reward-label">üí∞ Pok√©dollars :</span><span id="offlineGold"
                            class="reward-value gold-color">+0 $</span></div>
                </div>
                <button class="modal-btn" onclick="closeOfflineModal()">R√©cup√©rer les gains</button>
            </div>
        </div>
    </div>
    <script src="toastManager.js?v=1771877621249" defer></script>
    <script src="game.js?v=1771877621249" defer></script>
    <script>
        function saveGame() {
            if (window.game) return game.saveGame();
        }

        function loadGame() {
            if (window.game) return game.loadGame();
        }

        function resetGame() {
            if (typeof hardResetLogic === 'function') hardResetLogic();
        }

        window.changeZone = function (zoneId) {
            if (window.game) {
                window.game.changeZone(zoneId);
            }
        };

        window.addEventListener('load', () => {
            game = new Game();
            window.game = game; // garde window.game en sync pour les handlers (ex. slider options)
            updateZoneInfo();
        });
    </script>

</body>

</html>